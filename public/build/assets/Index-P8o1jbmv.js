import{r as h,u as z,j as e,H as R,a as f,L as k}from"./app-CPgHXiD9.js";import{A as V}from"./app-layout-Dss9L6oa.js";import{P as S}from"./pencil-DsF6jnAt.js";import{E as T}from"./eye-nFv6VDIl.js";import{T as L}from"./trash-2-D3TqesmJ.js";import{E as B}from"./ellipsis-vertical-BLr2umzv.js";import"./app-C8JSTOSC.js";import"./button-CTYswqwf.js";import"./index-DcRRyQYz.js";import"./index-B2uqG9qC.js";function re({projects:i,allProjects:d,tab:p="List"}){const g=["Create","List","Cards"],[m,x]=h.useState(p),[a,b]=h.useState(null),[I,N]=h.useState(!1),[j,y]=h.useState(null),D=["bg-yellow-100 text-yellow-800","bg-green-100 text-green-800","bg-blue-100 text-blue-800","bg-purple-100 text-purple-800","bg-pink-100 text-pink-800","bg-violet-100 text-violet-800","bg-neutral-100 text-neutral-800"];h.useEffect(()=>{const t=s=>{const c=s.target;a!==null&&!c.closest(".dropdown-container")&&b(null)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[a]);const{data:r,setData:o,post:Y,put:q,reset:v,errors:l}=z({title:"",technologies:[],description:"",start_date:"",end_date:"",client_name:"",project_manager:"",image:null}),[u,w]=h.useState(null);function A(t){const s=t.trim();s&&(r.technologies.includes(s)||o("technologies",[...r.technologies,s]))}function M(t){o("technologies",r.technologies.filter(s=>s!==t))}function $(t){t.preventDefault();const s=new FormData;Object.entries(r).forEach(([c,n])=>{c==="technologies"?n.forEach((_,C)=>s.append(`technologies[${C}]`,_)):n!=null&&s.append(c,n)}),f.post(route("projects.store"),s,{forceFormData:!0,onSuccess:()=>{v(),x("List")}})}function E(t){w(t.id),o({title:t.title,technologies:t.technologies??[],description:t.description??"",start_date:t.start_date,end_date:t.end_date??"",client_name:t.client_name,project_manager:t.project_manager,image:null}),x("Create")}function F(t){if(t.preventDefault(),u==null)return;const s=new FormData;Object.entries(r).forEach(([c,n])=>{c==="technologies"?n.forEach((_,C)=>s.append(`technologies[${C}]`,_)):n!=null&&s.append(c,n)}),f.post(route("projects.update",u),s,{forceFormData:!0,onSuccess:()=>{v(),w(null),x("List")},headers:{"X-HTTP-Method-Override":"PUT"}})}function P(t){y(t),N(!0),b(null)}function O(){N(!1),y(null)}function H(){j&&(f.delete(route("projects.destroy",j.id)),N(!1),y(null))}const U=u?"Update Project":"Create Project";return e.jsxs(V,{breadcrumbs:[{title:"Projects",href:"/projects"}],children:[e.jsx(R,{title:"Projects"}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx("div",{className:"flex gap-2 border-b",children:g.map(t=>e.jsx("button",{className:`px-4 py-2 -mb-px border-b-2 ${m===t?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,onClick:()=>{x(t),f.get(route("projects.index"),{tab:t},{preserveState:!0,preserveScroll:!0})},children:t},t))}),m==="Create"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"cursor-pointer text-xl font-semibold mb-4",children:u?"Edit Project":"Create Project"}),e.jsxs("form",{onSubmit:u?F:$,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Project Title"}),e.jsx("input",{className:"mt-1 block w-full rounded-md border px-3 py-2",value:r.title,onChange:t=>o("title",t.target.value)}),l.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Technologies"}),e.jsx(K,{values:r.technologies,onAdd:A,onRemove:M}),l.technologies&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:String(l.technologies)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Description"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border px-3 py-2",rows:4,value:r.description,onChange:t=>o("description",t.target.value)})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Start Date"}),e.jsx("input",{type:"date",className:"mt-1 block w-full rounded-md border px-3 py-2",value:r.start_date,onChange:t=>o("start_date",t.target.value)}),l.start_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.start_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"End Date"}),e.jsx("input",{type:"date",className:"mt-1 block w-full rounded-md border px-3 py-2",value:r.end_date??"",onChange:t=>o("end_date",t.target.value)}),l.end_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.end_date})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Client Name"}),e.jsx("input",{className:"mt-1 block w-full rounded-md border px-3 py-2",value:r.client_name,onChange:t=>o("client_name",t.target.value)}),l.client_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.client_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Project Manager"}),e.jsx("input",{className:"mt-1 block w-full rounded-md border px-3 py-2",value:r.project_manager,onChange:t=>o("project_manager",t.target.value)}),l.project_manager&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.project_manager})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Project Image"}),e.jsx("input",{type:"file",accept:"image/*",className:"mt-1 block w-full",onChange:t=>{var s;return o("image",((s=t.target.files)==null?void 0:s[0])??null)}}),l.image&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.image})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:U}),u&&e.jsx("button",{type:"button",onClick:()=>{v(),w(null)},className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"})]})]})]}),m==="List"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Projects"}),e.jsx("button",{className:"cursor-pointer px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700",onClick:()=>x("Create"),children:"New Project"})]}),e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("table",{className:"min-w-[800px] w-full border border-gray-200 bg-white text-sm rounded-lg",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Image"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Title"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Technologies"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Client"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Manager"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Start"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"End"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),e.jsx("tbody",{children:i.data.map(t=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-4 py-2",children:t.image_url?e.jsx("img",{src:t.image_url,alt:t.title,className:"h-12 w-12 object-cover rounded"}):e.jsx("span",{className:"text-xs text-gray-400",children:"No image"})}),e.jsx("td",{className:"px-4 py-2",children:t.title}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(t.technologies??[]).map((s,c)=>e.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 rounded-md",children:s},c))})}),e.jsx("td",{className:"px-4 py-2",children:t.client_name}),e.jsx("td",{className:"px-4 py-2",children:t.project_manager}),e.jsx("td",{className:"px-4 py-2",children:t.start_date}),e.jsx("td",{className:"px-4 py-2",children:t.end_date??"-"}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("button",{className:"cursor-pointer text-blue-600 hover:underline",onClick:()=>E(t),children:e.jsx(S,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsx(k,{className:"cursor-pointer text-green-600 hover:underline",href:route("projects.show",t.id),children:e.jsx(T,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsx("button",{className:"cursor-pointer text-red-600 hover:underline",onClick:()=>P(t),children:e.jsx(L,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})})]},t.id))})]})}),e.jsx("div",{className:"mt-4",children:e.jsx(X,{links:i.links})})]}),m==="Cards"&&e.jsx("div",{className:"grid md:grid-cols-2 xl:grid-cols-3 gap-4",children:d.map(t=>{var s;return e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 p-6 relative",children:[e.jsxs("div",{className:"absolute top-4 right-4 dropdown-container",children:[e.jsx("button",{onClick:()=>b(a===t.id?null:t.id||null),className:"cursor-pointer p-1 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(B,{className:"w-5 h-5 text-gray-600"})}),a===t.id&&e.jsx("div",{className:"absolute right-0 mt-2 w-28 bg-white rounded-md shadow-lg border border-gray-200 z-10",children:e.jsxs("div",{className:"py-1",children:[e.jsxs(k,{href:`/projects/${t.id}`,className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"View"]}),e.jsxs("button",{onClick:()=>{E(t),b(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>{P(t)},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Delete"]})]})})]}),e.jsx("div",{className:"flex justify-center mb-4",children:t.image_url&&e.jsx("img",{src:t.image_url,alt:t.title,className:"h-44 w-44 rounded-full object-cover"})}),e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:t.title})}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.start_date," → ",t.end_date??"Present"]}),e.jsx("p",{className:"text-gray-700 text-sm mb-4 line-clamp-3",children:t.description}),((s=t.technologies)==null?void 0:s.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.technologies.map((c,n)=>e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${D[n%D.length]}`,children:c},n))}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-800",children:"Client:"})," ",t.client_name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-800",children:"Manager:"})," ",t.project_manager]})]})]},t.id)})}),I&&e.jsx("div",{className:"fixed inset-0 bg-gray-500/50 backdrop-filter backdrop-blur-sm bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Delete"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete the project "',j==null?void 0:j.title,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:O,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:H,className:"px-4 py-2 text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors",children:"Yes, Delete"})]})]})})]})]})}function K({values:i,onAdd:d,onRemove:p}){const[g,m]=h.useState("");function x(a){a.key==="Enter"&&(a.preventDefault(),d(g),m(""))}return e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"mt-1 block w-full rounded-md border px-3 py-2",value:g,onChange:a=>m(a.target.value),onKeyDown:x,placeholder:"Type a technology and press Enter"}),e.jsx("button",{type:"button",onClick:()=>{d(g),m("")},className:"cursor-pointer px-3 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Add"})]}),i.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:i.map(a=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-2 py-1 bg-gray-100 rounded-full text-sm",children:[a,e.jsx("button",{type:"button",onClick:()=>p(a),className:"text-gray-500 hover:text-gray-700",children:"×"})]},a))})]})}function X({links:i}){return i!=null&&i.length?e.jsx("div",{className:"flex gap-2 mt-4",children:i.map((d,p)=>e.jsx(k,{href:d.url||"",preserveScroll:!0,preserveState:!0,className:`px-3 py-1 rounded border ${d.active?"bg-blue-600 text-white":"bg-white"} ${d.url?"":"opacity-50 pointer-events-none"}`,dangerouslySetInnerHTML:{__html:d.label}},p))}):null}export{re as default};
